{
  "description": "Proportion of NEONATES (NEWBORN LESS THAN 30 DAYS OLD) receiving on-time routine visit within last 7 DAYS",
  "name": "proportion_of_neonates_receiving_on_time_routine_visit_within_7days",
  "type": "Visits",
  "value": {
    "proportion": {
      "denominator": [
        {
          "calculation": {
            "formula": "(opened_on - d_dob_calc)/86400",
            "name": "age_when_opened"
          },
          "count": true,
          "dataset_id": "111bd86e63714f6fbdd42e4236675be4",
          "query": {
            "closed": false,
            "opened_on": {
              "$lte": "{{period.end}}",
              "$gte": "{{period.start}}"
            },
           "age_when_opened": {
              "$lt": 30
            },
            "type": "child"
          },
          "source": "case_export_all.csv"
        },
        {
          "calculation": {
            "formula": "(closed_on - d_dob_calc)/86400",
            "name": "age_when_closed"
          },
          "count": true,
          "dataset_id": "111bd86e63714f6fbdd42e4236675be4",
          "query": {
            "closed": true,
            "closed_on": {
              "$gte": "{{period.start}}",
              "$lte": "{{period.end}}"
            },
           "age_when_closed": {
              "$lt": 30
            },
            "type": "child"
          },
          "source": "case_export_all.csv"
        }
      ],
      "numerator": [
        {
          "count": true,
          "distinct": "case__case_id",
          "dataset_id": "0079a17a335e48e09dd63c8359f88cd9",
          "calculation": {
            "formula": "(meta_timeend - dob)/86400",
            "name": "age_at_visit"
          },
          "query": {
            "meta_timeend": {
              "$gte": "{{period.start}}",
              "$lte": "{{period.end}}"
            },
            "dob": {
              "$gte": "{{period.start}}",
              "$lte": "{{period.end}}"
            },
            "age_at_visit": {
              "$lt": 30
            }
          },
          "source": "Child List Visit.csv"
        }
      ]
    }
  }
}
